(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e){e.exports=JSON.parse('{"movies":[{"name":"Psycho","year":1960,"director":"Alfred Hitchcock","text":"A Phoenix secretary embezzles forty thousand dollars from her employer\'s client, goes on the run, and checks into a remote motel run by a young man under the domination of his mother.","id":"psycho","picture":"/pictures/psycho.jpg"},{"name":"The Good, the Bad and the Ugly","year":1966,"director":"Sergio Leone","text":"A bounty hunting scam joins two men in an uneasy alliance against a third in a race to find a fortune in gold buried in a remote cemetery.","id":"goodbad","picture":"/pictures/goodbad.jpg"},{"name":"Star Wars","year":1977,"director":"George Lucas","text":"Luke Skywalker joins forces with a Jedi Knight, a cocky pilot, a Wookiee and two droids to save the galaxy from the Empire\'s world-destroying battle station, while also attempting to rescue Princess Leia from the mysterious Darth Vader.","id":"starwars","picture":"/pictures/starwars.jpg"},{"name":"Alien","year":1979,"director":"Ridley Scott","text":"After a space merchant vessel receives an unknown transmission as a distress call, one of the crew is attacked by a mysterious life form and they soon realize that its life cycle has merely begun.","id":"alien","picture":"/pictures/alien.jpg"},{"name":"The Shining","year":1980,"director":"Stanley Kubrick","text":"A family heads to an isolated hotel for the winter where a sinister presence influences the father into violence, while his psychic son sees horrific forebodings from both past and future.","id":"theshining","picture":"/pictures/shining.jpg"},{"name":"Back to the Future","year":1985,"director":"Robert Zemeckis","text":"Marty McFly, a 17-year-old high school student, is accidentally sent thirty years into the past in a time-traveling DeLorean invented by his close friend, the eccentric scientist Doc Brown.","id":"backtothefuture","picture":"/pictures/backtothefuture.jpg"},{"name":"Titanic","year":1997,"director":"James Cameron","text":"A seventeen-year-old aristocrat falls in love with a kind but poor artist aboard the luxurious, ill-fated R.M.S. Titanic.","id":"titanic","picture":"/pictures/titanic.jpg"},{"name":"The Matrix","year":1999,"director":"Lana Wachowski, Lilly Wachowski","text":"A computer hacker learns from mysterious rebels about the true nature of his reality and his role in the war against its controllers.","id":"matrix","picture":"/pictures/matrix.jpg"},{"name":"City of God","year":2002,"director":"Fernando Meirelles, K\xe1tia Lund","text":"In the slums of Rio, two kids\' paths diverge as one struggles to become a photographer and the other a kingpin.","id":"cityofgod","picture":"/pictures/cityofgod.jpg"},{"name":"The Dark Knight","year":2008,"director":"Christopher Nolan","text":"When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.","id":"darkknight","picture":"/pictures/darkknight.jpg"},{"name":"Inception","year":2010,"director":"Christopher Nolan","text":"A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.","id":"inception","picture":"/pictures/inception.jpg"},{"name":"The Wailing","year":2016,"director":"Hong-jin Na","text":"Soon after a stranger arrives in a little village, a mysterious sickness starts spreading. A policeman, drawn into the incident, is forced to solve the mystery in order to save his daughter.","id":"wailing","picture":"/pictures/wailing.jpg"}]}')},115:function(e,t,a){e.exports=a(233)},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},156:function(e,t){},158:function(e,t){},189:function(e,t){},190:function(e,t){},232:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(37),o=a.n(i),c=(a(120),a(121),a(23)),s=a(25),l=a(8),u=a(14),m=a(16),d=a(15),p=a(17),h=a(18),g=a(3),v=a(7),f=(a(122),Object(h.a)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).setLoadingScreen=function(){var e=document.getElementById("loadingscreen");v.a.to(e,.9,{right:"0%"})},a.logOut=function(){a.props.store.user.username="",a.props.store.user.token="",document.getElementById("navfront").click()},a.changePage=function(e){var t=window.location.pathname;if((t=(t=t.toLowerCase()).split("")).shift(),(t=t.join(""))===e)return null;if("/"===window.location.pathname&&"frontpage"===e)return null;switch(e){case"login":a.setLoadingScreen(),setTimeout((function(){document.getElementById("navlogin").click()}),1e3);break;case"createaccount":a.setLoadingScreen(),setTimeout((function(){document.getElementById("navcreate").click()}),1e3);break;case"myreviews":a.setLoadingScreen(),setTimeout((function(){document.getElementById("navreview").click()}),1e3);break;case"frontpage":a.setLoadingScreen(),setTimeout((function(){document.getElementById("navfront").click()}),1e3)}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this;return e=0===Object(g.n)(this.props.store.user).username.length?r.a.createElement("div",{id:"loginnav"},r.a.createElement("p",{onClick:function(){return t.changePage("login")}},"Login"),r.a.createElement("p",{onClick:function(){return t.changePage("createaccount")}},"Create Account"),r.a.createElement(c.b,{id:"navlogin",className:"navlink",to:"/login"}),r.a.createElement(c.b,{id:"navcreate",className:"navlink",to:"/createaccount"})):r.a.createElement("div",{id:"loginnav2"},r.a.createElement("p",{onClick:function(){return t.changePage("myreviews")}},"My Reviews"),r.a.createElement("p",{onClick:this.logOut},"Log out"),r.a.createElement(c.b,{id:"navreview",className:"navlink",to:"/myreviews"})),r.a.createElement("div",{id:"headerwrap"},r.a.createElement("div",{id:"headercont"},r.a.createElement("div",{id:"rateamovielogo"},r.a.createElement("p",{onClick:function(){return t.changePage("frontpage")}},"Rate a Movie"),r.a.createElement(c.b,{id:"navfront",className:"navlink",to:"/"})),e,r.a.createElement("p",{id:"forrender"},this.props.store.user.username)))}}]),t}(r.a.Component))),E=(a(127),Object(h.a)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).loadingScreen=function(){if(a.calc=a.calc+1,a.calc===a.props.store.movies.length){var e=document.getElementById("loadingscreen");v.a.to(e,.9,{right:"-101%"})}},a.changePage=function(e){var t=document.getElementById("loadingscreen");v.a.to(t,.9,{right:"0%"});var a="link-"+e.target.id,n=document.getElementById(a);setTimeout((function(){n.click()}),1e3)},a.state={target:""},a.calc=0,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props.store.movies.map((function(t){return r.a.createElement("div",{key:t.id,className:"frontmovie"},r.a.createElement("img",{alt:t.name,id:t.id,onClick:e.changePage,onLoad:e.loadingScreen,src:t.picture}),r.a.createElement("p",null,t.name),r.a.createElement(c.b,{id:"link-"+t.id,to:"/movie?"+t.id,className:"movielink"}))}));return r.a.createElement("div",{id:"frontwrapper"},r.a.createElement("div",{id:"fronttable"},r.a.createElement("div",{id:"frontmovieswrap"},t)))}}]),t}(r.a.Component))),w=(a(128),a(38)),y=Object(h.a)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).setLoadingScreen=function(){var e=document.getElementById("loadingscreen");v.a.to(e,.9,{right:"-101%"})},a.setReviewBox=function(){var e;0===a.username.length?(e=r.a.createElement("div",{id:"reviewbox"},r.a.createElement("p",{className:"addmargin"},"Log in to write a review.")),a.setState({reviewbox:e})):0!==a.username.length&&"no"===a.reviewdone?(e=r.a.createElement("div",{id:"reviewbox"},r.a.createElement("p",{className:"addmargin"},"Username: ",a.props.store.user.username),r.a.createElement("div",{id:"ratingbox"},r.a.createElement("p",null,"Rating:"),r.a.createElement("select",{onChange:a.changeRating},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"7"},"7"),r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"9"},"9"),r.a.createElement("option",{value:"10"},"10"))),r.a.createElement("textarea",{onChange:a.changeText,id:"reviewtext"}),r.a.createElement("div",{onClick:a.sendReview,className:"thebutton"},r.a.createElement("p",null,"Send"))),a.setState({reviewbox:e})):"yes"===a.reviewdone&&(e=r.a.createElement("div",{id:"reviewbox"},r.a.createElement("p",{className:"addmargin"},"Already reviewed!")),a.setState({reviewbox:e}))},a.sendReview=function(){w.post("/review",{params:{username:a.props.store.user.username,movieid:a.id,rating:a.rating,text:a.text,token:a.props.store.user.token}}).then((function(e){"no"===e.data?window.alert("Error! Please login again."):"success"===e.data&&(a.getMovie(),a.setReviewBox())})).catch((function(e){}))},a.changeRating=function(e){a.rating=e.target.value},a.changeText=function(e){a.text=e.target.value},a.getMovie=function(){w.get("/getmovie",{params:{id:a.id}}).then((function(e){if(0===e.data.length)a.setState({reviews:r.a.createElement("div",{id:"noreviews"},r.a.createElement("p",null,"No reviews yet!"))});else if(0!==e.data.length){var t=e.data,n=[];t=t.map((function(e){return n.push(e.rating),e.username===a.username&&(a.reviewdone="yes"),r.a.createElement("div",{key:e._id,className:"moviereview"},r.a.createElement("p",null,"Username: ",e.username),r.a.createElement("p",null,"Rating: ",e.rating),r.a.createElement("p",null,e.text))}));var i=n.reduce((function(e,t){return e+t}))/n.length;i=i.toFixed(2),a.setState({reviews:t,averagescore:i})}a.setReviewBox()})).catch((function(e){}))},a.state={reviews:"",reviewbox:"",averagescore:""},a.username="",a.id="",a.rating="1",a.text="",a.reviewdone="no",a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getMovie(),window.scrollTo(0,0)}},{key:"render",value:function(){this.username=this.props.store.user.username;var e=window.location.search.split("");e.shift(),e=e.join("");for(var t,a=this.props.store.movies,n=0;n<a.length;n++)a[n].id===e&&(t=a[n]);return this.id=t.id,t=r.a.createElement("div",{id:"themovie"},r.a.createElement("div",{id:"themoviepic"},r.a.createElement("img",{alt:"The movie",onLoad:this.setLoadingScreen,src:t.picture})),r.a.createElement("div",{id:"themovieinfo"},r.a.createElement("div",{id:"movieinfotext"},r.a.createElement("p",null,t.name),r.a.createElement("p",null,t.year),r.a.createElement("p",null,"Director: ",t.director),r.a.createElement("p",null,t.text),r.a.createElement("p",null,"Average score: ",this.state.averagescore)))),r.a.createElement("div",{id:"themoviewrap"},r.a.createElement("div",{id:"themovietable"},t,r.a.createElement("div",{id:"movieline"}),this.state.reviewbox,r.a.createElement("div",{id:"reviewsall"},this.state.reviews)))}}]),t}(r.a.Component)),k=(a(146),a(38)),b=Object(h.a)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).deleteReview=function(e){k.delete("/deletereview",{params:{id:e,token:a.props.store.user.token}}).then((function(e){"success"===e.data?a.getReviews():"no"===e.data&&window.alert("Error! Please login again!")})).catch((function(e){window.alert("Error! Please login again!")}))},a.getReviews=function(){k.get("/getmyreviews",{params:{username:a.props.store.user.username,token:a.props.store.user.token}}).then((function(e){if("no"===e.data)return window.alert("Error! Please login again!"),null;var t,n=e.data,i=a.props.store.movies,o=n.map((function(e){for(var n=0;n<i.length;n++)i[n].id===e.movieid&&(t=i[n].name);return r.a.createElement("div",{key:e._id,className:"myreview"},r.a.createElement("p",null,"Movie: ",t),r.a.createElement("p",null,"rating: ",e.rating),r.a.createElement("p",null,e.text),r.a.createElement("div",{onClick:function(){return a.deleteReview(e._id)},className:"thebutton3"},r.a.createElement("p",null,"Delete")))}));a.setState({myreviews:o})})).catch((function(e){}))},a.state={myreviews:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getReviews();var e=document.getElementById("loadingscreen");v.a.to(e,.9,{right:"-101%"}),window.scrollTo(0,0)}},{key:"render",value:function(){return r.a.createElement("div",{id:"myreviewswrap"},r.a.createElement("div",{id:"myreviewscont"},r.a.createElement("div",{id:"myreviews"},r.a.createElement("h1",null,this.props.store.user.username),this.state.myreviews)))}}]),t}(r.a.Component)),j=(a(147),a(38));a(148).config();var x=a(151),O=Object(h.a)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).send=function(){if(0===a.username.length||0===a.password.length)a.setState({message:r.a.createElement("p",null,"Pick a username and a password!")});else{var e=a.password,t=a.username;x.genSalt(Object({NODE_ENV:"production",PUBLIC_URL:""}).SALT,(function(n,i){x.hash(e,i,(function(e,n){j.post("/create",{params:{username:t,password:n}}).then((function(e){if("found"===e.data)a.setState({message:r.a.createElement("p",null,"Username reserved!")});else if("success"===e.data.type){var t=e.data.username,n=e.data.token;a.props.store.user.username=t,a.props.store.user.token=n;var i=document.getElementById("loadingscreen");v.a.to(i,1,{right:"0%"}),setTimeout((function(){document.getElementById("navfront").click()}),1e3)}})).catch((function(e){}))}))}))}},a.change=function(e){"username"===e.target.id?a.username=e.target.value:"password"===e.target.id&&(a.password=e.target.value)},a.state={message:r.a.createElement("p",null,"\xa0")},a.username="",a.password="",a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("loadingscreen");v.a.to(e,1,{right:"-101%"})}},{key:"render",value:function(){return r.a.createElement("div",{id:"createwrap"},r.a.createElement("div",{id:"createcont"},r.a.createElement("h1",null,"Create Account"),r.a.createElement("input",{id:"username",onChange:this.change,type:"text"}),r.a.createElement("p",null,"Username"),r.a.createElement("input",{id:"password",onChange:this.change,type:"text"}),r.a.createElement("p",null,"Password"),r.a.createElement("div",{onClick:this.send,className:"thebutton2"},r.a.createElement("p",null,"Send")),this.state.message))}}]),t}(r.a.Component)),S=(a(232),a(38)),C=Object(h.a)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).send=function(){if(0===a.username.length||0===a.password.length)a.setState({message:r.a.createElement("p",null,"Type your username and your password!")});else{var e=a.username,t=a.password;S.post("/loginuser",{params:{username:e,password:t}}).then((function(t){if("no"===t.data)a.setState({message:r.a.createElement("p",null,"Wrong username or password!")});else if("success"===t.data.type){a.props.store.user.username=e,a.props.store.user.token=t.data.token;var n=document.getElementById("loadingscreen");v.a.to(n,1,{right:"0%"}),setTimeout((function(){document.getElementById("navfront").click()}),1e3)}})).catch((function(e){}))}},a.change=function(e){"username"===e.target.id?a.username=e.target.value:"password"===e.target.id&&(a.password=e.target.value)},a.state={message:r.a.createElement("p",null,"\xa0")},a.username="",a.password="",a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("loadingscreen");v.a.to(e,1,{right:"-101%"})}},{key:"render",value:function(){return r.a.createElement("div",{id:"createwrap"},r.a.createElement("div",{id:"createcont"},r.a.createElement("h1",null,"Login"),r.a.createElement("input",{id:"username",onChange:this.change,type:"text"}),r.a.createElement("p",null,"Username"),r.a.createElement("input",{id:"password",onChange:this.change,type:"text"}),r.a.createElement("p",null,"Password"),r.a.createElement("div",{onClick:this.send,className:"thebutton2"},r.a.createElement("p",null,"Send")),this.state.message))}}]),t}(r.a.Component)),B=a(114).movies,L=new function e(){Object(l.a)(this,e),this.movies=B,this.user=Object(g.k)({username:"",token:""})};var T=function(){return r.a.createElement(c.a,null,r.a.createElement("div",{id:"App",className:"App"},r.a.createElement("div",{id:"loadingscreen"}),r.a.createElement("div",{id:"background"},r.a.createElement("h1",null,"RATE A MOVIE"),r.a.createElement("h2",null,"RATE A MOVIE")),r.a.createElement(f,{store:L}),r.a.createElement("div",{id:"emptyspace"}),r.a.createElement(s.a,{exact:!0,path:"/",component:function(){return r.a.createElement(E,{store:L})}}),r.a.createElement(s.a,{path:"/movie",component:function(){return r.a.createElement(y,{store:L})}}),r.a.createElement(s.a,{path:"/myreviews",component:function(){return r.a.createElement(b,{store:L})}}),r.a.createElement(s.a,{path:"/createaccount",component:function(){return r.a.createElement(O,{store:L})}}),r.a.createElement(s.a,{path:"/login",component:function(){return r.a.createElement(C,{store:L})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[115,1,2]]]);
//# sourceMappingURL=main.8f15daf8.chunk.js.map